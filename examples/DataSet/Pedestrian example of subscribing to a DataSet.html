

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Pedestrian example of subscribing to a DataSet &mdash; QCoDeS 0.6.0+195.gbaa1dc3c3 documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="../../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../../_static/jquery.js"></script>
        <script type="text/javascript" src="../../_static/underscore.js"></script>
        <script type="text/javascript" src="../../_static/doctools.js"></script>
        <script type="text/javascript" src="../../_static/language_data.js"></script>
        <script async="async" type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
        <script type="text/x-mathjax-config">MathJax.Hub.Config({"tex2jax": {"inlineMath": [["$", "$"], ["\\(", "\\)"]], "processEscapes": true, "ignoreClass": "document", "processClass": "math|output_area"}})</script>
    
    <script type="text/javascript" src="../../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="The Experiment Container" href="The-Experiment-Container.html" />
    <link rel="prev" title="Paramtypes explained" href="Paramtypes explained.html" />
    <link href="../../_static/style.css" rel="stylesheet" type="text/css">

</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../index.html" class="icon icon-home"> QCoDeS
          

          
          </a>

          
            
            
              <div class="version">
                0.6.0+195.gbaa1dc3c3
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../start/index.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../help.html">Get Help</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../user/index.html">User Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../community/index.html">Community Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../dataset/index.html">DataSet</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../api/index.html">QCoDes API documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../api/generated/qcodes.instrument_drivers.html">qcodes.instrument_drivers package</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../changes/index.html">Changelogs</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">Examples of using QCoDeS</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../index.html#basic-examples">Basic examples</a></li>
<li class="toctree-l2"><a class="reference internal" href="../index.html#parameters">Parameters</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../index.html#dataset">DataSet</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="Benchmarking.html">Dataset Benchmarking</a></li>
<li class="toctree-l3"><a class="reference internal" href="Dataset Context Manager.html">The Context Manager aka the Measurement Object</a></li>
<li class="toctree-l3"><a class="reference internal" href="Dataset_Performance.html">DataSet Performance</a></li>
<li class="toctree-l3"><a class="reference internal" href="Extracting-runs-from-one-DB-file-to-another.html">Extracting runs from one DB file to another</a></li>
<li class="toctree-l3"><a class="reference internal" href="Implementing_doND_using_the_dataset.html">Implementing doND using the dataset</a></li>
<li class="toctree-l3"><a class="reference internal" href="Linking to parent datasets.html">Linking to parent datasets</a></li>
<li class="toctree-l3"><a class="reference internal" href="Load old data.html">Load old Data</a></li>
<li class="toctree-l3"><a class="reference internal" href="Measuring X as a function of time.html">Measuring X as a function of time</a></li>
<li class="toctree-l3"><a class="reference internal" href="Offline Plotting Tutorial.html">Offline Plotting Tutorial</a></li>
<li class="toctree-l3"><a class="reference internal" href="Offline plotting with categorical data.html">Offline plotting with categorical data</a></li>
<li class="toctree-l3"><a class="reference internal" href="Offline plotting with complex data.html">Offline plotting with complex data</a></li>
<li class="toctree-l3"><a class="reference internal" href="Paramtypes explained.html">Paramtypes explained</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">Pedestrian example of subscribing to a DataSet</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#Call-signature">Call signature</a></li>
<li class="toctree-l4"><a class="reference internal" href="#Frequency">Frequency</a></li>
<li class="toctree-l4"><a class="reference internal" href="#Order">Order</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="The-Experiment-Container.html">The Experiment Container</a></li>
<li class="toctree-l3"><a class="reference internal" href="Working with snapshots.html">Working with snapshots</a></li>
<li class="toctree-l3"><a class="reference internal" href="Working-With-Pandas-and-XArray.html">Working with Pandas and XArray</a></li>
<li class="toctree-l3"><a class="reference internal" href="subscriber json exporter.html">Subscriber with JSON export</a></li>
<li class="toctree-l3"><a class="reference internal" href="Real_instruments/Example Measurements with Real Instruments.html">Example Measurements with Real Instruments</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../index.html#plotting">Plotting</a></li>
<li class="toctree-l2"><a class="reference internal" href="../index.html#drivers">Drivers</a></li>
<li class="toctree-l2"><a class="reference internal" href="../index.html#writing-drivers">Writing Drivers</a></li>
<li class="toctree-l2"><a class="reference internal" href="../index.html#logging">Logging</a></li>
<li class="toctree-l2"><a class="reference internal" href="../index.html#legacy-examples">Legacy examples</a></li>
</ul>
</li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">QCoDeS</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../index.html">Docs</a> &raquo;</li>
        
          <li><a href="../index.html">Examples of using QCoDeS</a> &raquo;</li>
        
      <li>Pedestrian example of subscribing to a DataSet</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../../_sources/examples/DataSet/Pedestrian example of subscribing to a DataSet.ipynb.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  
<style>
/* CSS for nbsphinx extension */

/* remove conflicting styling from Sphinx themes */
div.nbinput,
div.nbinput div.prompt,
div.nbinput div.input_area,
div.nbinput div[class*=highlight],
div.nbinput div[class*=highlight] pre,
div.nboutput,
div.nbinput div.prompt,
div.nbinput div.output_area,
div.nboutput div[class*=highlight],
div.nboutput div[class*=highlight] pre {
    background: none;
    border: none;
    padding: 0 0;
    margin: 0;
    box-shadow: none;
}

/* avoid gaps between output lines */
div.nboutput div[class*=highlight] pre {
    line-height: normal;
}

/* input/output containers */
div.nbinput,
div.nboutput {
    display: -webkit-flex;
    display: flex;
    align-items: flex-start;
    margin: 0;
    width: 100%;
}
@media (max-width: 540px) {
    div.nbinput,
    div.nboutput {
        flex-direction: column;
    }
}

/* input container */
div.nbinput {
    padding-top: 5px;
}

/* last container */
div.nblast {
    padding-bottom: 5px;
}

/* input prompt */
div.nbinput div.prompt pre {
    color: #307FC1;
}

/* output prompt */
div.nboutput div.prompt pre {
    color: #BF5B3D;
}

/* all prompts */
div.nbinput div.prompt,
div.nboutput div.prompt {
    min-width: 5ex;
    padding-top: 0.4em;
    padding-right: 0.4em;
    text-align: right;
    flex: 0;
}
@media (max-width: 540px) {
    div.nbinput div.prompt,
    div.nboutput div.prompt {
        text-align: left;
        padding: 0.4em;
    }
    div.nboutput div.prompt.empty {
        padding: 0;
    }
}

/* disable scrollbars on prompts */
div.nbinput div.prompt pre,
div.nboutput div.prompt pre {
    overflow: hidden;
}

/* input/output area */
div.nbinput div.input_area,
div.nboutput div.output_area {
    padding: 0.4em;
    -webkit-flex: 1;
    flex: 1;
    overflow: auto;
}
@media (max-width: 540px) {
    div.nbinput div.input_area,
    div.nboutput div.output_area {
        width: 100%;
    }
}

/* input area */
div.nbinput div.input_area {
    border: 1px solid #e0e0e0;
    border-radius: 2px;
    background: #f5f5f5;
}

/* override MathJax center alignment in output cells */
div.nboutput div[class*=MathJax] {
    text-align: left !important;
}

/* override sphinx.ext.imgmath center alignment in output cells */
div.nboutput div.math p {
    text-align: left;
}

/* standard error */
div.nboutput div.output_area.stderr {
    background: #fdd;
}

/* ANSI colors */
.ansi-black-fg { color: #3E424D; }
.ansi-black-bg { background-color: #3E424D; }
.ansi-black-intense-fg { color: #282C36; }
.ansi-black-intense-bg { background-color: #282C36; }
.ansi-red-fg { color: #E75C58; }
.ansi-red-bg { background-color: #E75C58; }
.ansi-red-intense-fg { color: #B22B31; }
.ansi-red-intense-bg { background-color: #B22B31; }
.ansi-green-fg { color: #00A250; }
.ansi-green-bg { background-color: #00A250; }
.ansi-green-intense-fg { color: #007427; }
.ansi-green-intense-bg { background-color: #007427; }
.ansi-yellow-fg { color: #DDB62B; }
.ansi-yellow-bg { background-color: #DDB62B; }
.ansi-yellow-intense-fg { color: #B27D12; }
.ansi-yellow-intense-bg { background-color: #B27D12; }
.ansi-blue-fg { color: #208FFB; }
.ansi-blue-bg { background-color: #208FFB; }
.ansi-blue-intense-fg { color: #0065CA; }
.ansi-blue-intense-bg { background-color: #0065CA; }
.ansi-magenta-fg { color: #D160C4; }
.ansi-magenta-bg { background-color: #D160C4; }
.ansi-magenta-intense-fg { color: #A03196; }
.ansi-magenta-intense-bg { background-color: #A03196; }
.ansi-cyan-fg { color: #60C6C8; }
.ansi-cyan-bg { background-color: #60C6C8; }
.ansi-cyan-intense-fg { color: #258F8F; }
.ansi-cyan-intense-bg { background-color: #258F8F; }
.ansi-white-fg { color: #C5C1B4; }
.ansi-white-bg { background-color: #C5C1B4; }
.ansi-white-intense-fg { color: #A1A6B2; }
.ansi-white-intense-bg { background-color: #A1A6B2; }

.ansi-default-inverse-fg { color: #FFFFFF; }
.ansi-default-inverse-bg { background-color: #000000; }

.ansi-bold { font-weight: bold; }
.ansi-underline { text-decoration: underline; }

/* Some additional styling taken form the Jupyter notebook CSS */
div.rendered_html table {
  border: none;
  border-collapse: collapse;
  border-spacing: 0;
  color: black;
  font-size: 12px;
  table-layout: fixed;
}
div.rendered_html thead {
  border-bottom: 1px solid black;
  vertical-align: bottom;
}
div.rendered_html tr,
div.rendered_html th,
div.rendered_html td {
  text-align: right;
  vertical-align: middle;
  padding: 0.5em 0.5em;
  line-height: normal;
  white-space: normal;
  max-width: none;
  border: none;
}
div.rendered_html th {
  font-weight: bold;
}
div.rendered_html tbody tr:nth-child(odd) {
  background: #f5f5f5;
}
div.rendered_html tbody tr:hover {
  background: rgba(66, 165, 245, 0.2);
}

/* CSS overrides for sphinx_rtd_theme */

/* 24px margin */
.nbinput.nblast,
.nboutput.nblast {
    margin-bottom: 19px;  /* padding has already 5px */
}

/* ... except between code cells! */
.nblast + .nbinput {
    margin-top: -19px;
}

.admonition > p:before {
    margin-right: 4px;  /* make room for the exclamation icon */
}

/* Fix math alignment, see https://github.com/rtfd/sphinx_rtd_theme/pull/686 */
.math {
    text-align: unset;
}
</style>
<div class="section" id="Pedestrian-example-of-subscribing-to-a-DataSet">
<h1>Pedestrian example of subscribing to a DataSet<a class="headerlink" href="#Pedestrian-example-of-subscribing-to-a-DataSet" title="Permalink to this headline">¶</a></h1>
<p>It is possible to <em>subscribe</em> to a dataset. Subscribing means adding a function to the dataset and having the dataset call that function every time a result is added to the dataset (or more rarely, see below).</p>
<div class="section" id="Call-signature">
<h2>Call signature<a class="headerlink" href="#Call-signature" title="Permalink to this headline">¶</a></h2>
<p>The subscribing function must have the following call signature:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">fun</span><span class="p">(</span><span class="n">results</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">Tuple</span><span class="p">[</span><span class="n">Value</span><span class="p">]],</span> <span class="n">length</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
    <span class="n">state</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">MutableSequence</span><span class="p">,</span> <span class="n">MutableMapping</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Args:</span>
<span class="sd">        results: A list of tuples where each tuple holds the results inserted into the dataset.</span>
<span class="sd">            For two scalar parameters, X and Y, results might look like [(x1, y1), (x2, y2), ...]</span>
<span class="sd">        length: The current length of the dataset.</span>
<span class="sd">        state: Any mutable sequence/mapping that can be used to hold information from call to call.</span>
<span class="sd">            In practice a list or a dict.</span>
<span class="sd">    &quot;&quot;&quot;</span>
</pre></div>
</div>
<p>Below we provide an example function that counts the number of times a voltage has exceeded a certain limit.</p>
</div>
<div class="section" id="Frequency">
<h2>Frequency<a class="headerlink" href="#Frequency" title="Permalink to this headline">¶</a></h2>
<p>Since calling the function <strong>every</strong> time an insertion is made may be too frequent, a <code class="docutils literal notranslate"><span class="pre">min_wait</span></code> and a <code class="docutils literal notranslate"><span class="pre">min_count</span></code> argument may be provided when subscribing. The dataset will then only call the function upon inserting a result if <code class="docutils literal notranslate"><span class="pre">min_wait</span></code> seconds have elapsed since the last call (or the start of the subscription, in the time before the first call) AND <code class="docutils literal notranslate"><span class="pre">min_count</span></code> results have been added to the dataset since the last call (or the start of the subscription). All the results added in the
meantime are queued and passed to the function in one go.</p>
</div>
<div class="section" id="Order">
<h2>Order<a class="headerlink" href="#Order" title="Permalink to this headline">¶</a></h2>
<p>The subscription must be set up <strong>after</strong> all parameters have been added to the dataset.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[1]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="kn">from</span> <span class="nn">qcodes</span> <span class="k">import</span> <span class="n">initialise_database</span><span class="p">,</span> <span class="n">load_or_create_experiment</span><span class="p">,</span> \
    <span class="n">new_data_set</span><span class="p">,</span> <span class="n">ParamSpec</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">from</span> <span class="nn">time</span> <span class="k">import</span> <span class="n">sleep</span>
</pre></div>
</div>
</div>
<div class="section" id="Example-1:-A-notification">
<h3>Example 1: A notification<a class="headerlink" href="#Example-1:-A-notification" title="Permalink to this headline">¶</a></h3>
<p>We imagine scanning a frequency and reading out a noisy voltage. When the voltage has exceeded a threshold 5 times, we want to receive a warning.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[2]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">initialise_database</span><span class="p">()</span>
<span class="n">exp</span> <span class="o">=</span> <span class="n">load_or_create_experiment</span><span class="p">(</span><span class="n">experiment_name</span><span class="o">=</span><span class="s2">&quot;subscription_tutorial&quot;</span><span class="p">,</span> <span class="n">sample_name</span><span class="o">=</span><span class="s2">&quot;no_sample&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[3]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">dataSet</span> <span class="o">=</span> <span class="n">new_data_set</span><span class="p">(</span><span class="s2">&quot;test&quot;</span><span class="p">,</span>
                       <span class="n">exp_id</span><span class="o">=</span><span class="n">exp</span><span class="o">.</span><span class="n">exp_id</span><span class="p">,</span>
                       <span class="n">specs</span><span class="o">=</span><span class="p">[</span><span class="n">ParamSpec</span><span class="p">(</span><span class="s2">&quot;x&quot;</span><span class="p">,</span> <span class="s2">&quot;numeric&quot;</span><span class="p">,</span> <span class="n">unit</span><span class="o">=</span><span class="s1">&#39;Hz&#39;</span><span class="p">),</span>
                              <span class="n">ParamSpec</span><span class="p">(</span><span class="s2">&quot;y&quot;</span><span class="p">,</span> <span class="s2">&quot;numeric&quot;</span><span class="p">,</span> <span class="n">unit</span><span class="o">=</span><span class="s1">&#39;V&#39;</span><span class="p">)])</span>
<span class="n">dataSet</span><span class="o">.</span><span class="n">mark_started</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[4]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="k">def</span> <span class="nf">threshold_notifier</span><span class="p">(</span><span class="n">results</span><span class="p">,</span> <span class="n">length</span><span class="p">,</span> <span class="n">state</span><span class="p">):</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">state</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">4</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">f</span><span class="s1">&#39;At step </span><span class="si">{length}</span><span class="s1">: The voltage exceeded the limit 5 times! &#39;</span><span class="p">)</span>
        <span class="n">state</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
    <span class="k">for</span> <span class="n">result</span> <span class="ow">in</span> <span class="n">results</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">result</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">&gt;</span> <span class="mf">0.8</span><span class="p">:</span>
            <span class="n">state</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">result</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
</pre></div>
</div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[5]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="c1"># now perform the subscription</span>
<span class="c1"># since this is important safety info, we want our callback function called</span>
<span class="c1"># on EVERY insertion</span>
<span class="n">sub_id</span> <span class="o">=</span> <span class="n">dataSet</span><span class="o">.</span><span class="n">subscribe</span><span class="p">(</span><span class="n">threshold_notifier</span><span class="p">,</span> <span class="n">min_wait</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">min_count</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">state</span><span class="o">=</span><span class="p">[])</span>
</pre></div>
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[6]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="mi">100</span><span class="p">,</span> <span class="mi">200</span><span class="p">,</span> <span class="mi">150</span><span class="p">):</span>
    <span class="n">y</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randn</span><span class="p">()</span>
    <span class="n">dataSet</span><span class="o">.</span><span class="n">add_result</span><span class="p">({</span><span class="s2">&quot;x&quot;</span><span class="p">:</span> <span class="n">x</span><span class="p">,</span> <span class="s2">&quot;y&quot;</span><span class="p">:</span> <span class="n">y</span><span class="p">})</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
At step 6: The voltage exceeded the limit 5 times!
At step 11: The voltage exceeded the limit 5 times!
At step 16: The voltage exceeded the limit 5 times!
At step 21: The voltage exceeded the limit 5 times!
At step 26: The voltage exceeded the limit 5 times!
At step 31: The voltage exceeded the limit 5 times!
At step 36: The voltage exceeded the limit 5 times!
At step 41: The voltage exceeded the limit 5 times!
At step 46: The voltage exceeded the limit 5 times!
At step 51: The voltage exceeded the limit 5 times!
At step 56: The voltage exceeded the limit 5 times!
At step 61: The voltage exceeded the limit 5 times!
At step 66: The voltage exceeded the limit 5 times!
At step 71: The voltage exceeded the limit 5 times!
At step 76: The voltage exceeded the limit 5 times!
At step 81: The voltage exceeded the limit 5 times!
At step 86: The voltage exceeded the limit 5 times!
At step 91: The voltage exceeded the limit 5 times!
At step 96: The voltage exceeded the limit 5 times!
At step 101: The voltage exceeded the limit 5 times!
At step 106: The voltage exceeded the limit 5 times!
At step 111: The voltage exceeded the limit 5 times!
At step 116: The voltage exceeded the limit 5 times!
At step 121: The voltage exceeded the limit 5 times!
At step 126: The voltage exceeded the limit 5 times!
At step 131: The voltage exceeded the limit 5 times!
At step 136: The voltage exceeded the limit 5 times!
At step 141: The voltage exceeded the limit 5 times!
At step 146: The voltage exceeded the limit 5 times!
</pre></div></div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[7]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">dataSet</span><span class="o">.</span><span class="n">unsubscribe_all</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="Example-2:-ASCII-Plotter">
<h3>Example 2: ASCII Plotter<a class="headerlink" href="#Example-2:-ASCII-Plotter" title="Permalink to this headline">¶</a></h3>
<p>Not the most useful example for real life, but indeed what every kid on the block seems to be demanding.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[8]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">dataSet</span> <span class="o">=</span> <span class="n">new_data_set</span><span class="p">(</span><span class="s2">&quot;test&quot;</span><span class="p">,</span> <span class="n">exp_id</span><span class="o">=</span><span class="n">exp</span><span class="o">.</span><span class="n">exp_id</span><span class="p">,</span>
                       <span class="n">specs</span><span class="o">=</span><span class="p">[</span><span class="n">ParamSpec</span><span class="p">(</span><span class="s2">&quot;blip&quot;</span><span class="p">,</span> <span class="s2">&quot;numeric&quot;</span><span class="p">,</span> <span class="n">unit</span><span class="o">=</span><span class="s1">&#39;bit&#39;</span><span class="p">),</span>
                              <span class="n">ParamSpec</span><span class="p">(</span><span class="s2">&quot;blop&quot;</span><span class="p">,</span> <span class="s2">&quot;numeric&quot;</span><span class="p">,</span> <span class="n">unit</span><span class="o">=</span><span class="s1">&#39;bit&#39;</span><span class="p">)])</span>
<span class="n">dataSet</span><span class="o">.</span><span class="n">mark_started</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[9]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="k">def</span> <span class="nf">ASCII_plotter_5bit</span><span class="p">(</span><span class="n">results</span><span class="p">,</span> <span class="n">length</span><span class="p">,</span> <span class="n">state</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Glorious 5-bit signal plotter</span>

<span class="sd">    Digitises the range (-1, 1) with 4 bits and plots it</span>
<span class="sd">    in stdout. Crashes and burns if given data outside that</span>
<span class="sd">    interval.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">for</span> <span class="n">result</span> <span class="ow">in</span> <span class="n">results</span><span class="p">:</span>
        <span class="n">plotline</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;.&#39;</span><span class="p">]</span> <span class="o">*</span> <span class="mi">32</span>
        <span class="n">yvalue</span> <span class="o">=</span> <span class="n">result</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
        <span class="n">yvalue</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="n">yvalue</span> <span class="o">/=</span> <span class="mi">2</span>
        <span class="n">yvalue</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">yvalue</span><span class="o">*</span><span class="mi">31</span><span class="p">)</span>
        <span class="n">plotline</span><span class="p">[</span><span class="n">yvalue</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;O&#39;</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">plotline</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[10]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">sub_id</span> <span class="o">=</span> <span class="n">dataSet</span><span class="o">.</span><span class="n">subscribe</span><span class="p">(</span><span class="n">ASCII_plotter_5bit</span><span class="p">,</span> <span class="n">min_wait</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">min_count</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">state</span><span class="o">=</span><span class="p">[])</span>
</pre></div>
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[11]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">3</span><span class="o">*</span><span class="n">np</span><span class="o">.</span><span class="n">pi</span><span class="p">,</span> <span class="mi">100</span><span class="p">):</span>
    <span class="n">yvalue</span> <span class="o">=</span> <span class="mf">0.9</span><span class="o">*</span><span class="n">np</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="o">+</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randn</span><span class="p">()</span><span class="o">*</span><span class="mf">0.05</span>
    <span class="n">dataSet</span><span class="o">.</span><span class="n">add_result</span><span class="p">({</span><span class="s2">&quot;blip&quot;</span><span class="p">:</span> <span class="n">x</span><span class="p">,</span> <span class="s2">&quot;blop&quot;</span><span class="p">:</span> <span class="n">yvalue</span><span class="p">})</span>
    <span class="n">sleep</span><span class="p">(</span><span class="mf">0.1</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
................O...............
................O...............
...................O............
...................O............
....................O...........
......................O.........
......................O.........
.......................O........
..........................O.....
.........................O......
..........................O.....
...........................O....
............................O...
............................O...
............................O...
............................O...
.............................O..
.............................O..
.............................O..
............................O...
.............................O..
...........................O....
..........................O.....
............................O...
.........................O......
..........................O.....
.......................O........
........................O.......
.....................O..........
....................O...........
...................O............
....................O...........
................O...............
...............O................
...............O................
............O...................
...........O....................
..........O.....................
.........O......................
.......O........................
.......O........................
.....O..........................
.....O..........................
...O............................
....O...........................
...O............................
..O.............................
..O.............................
O...............................
.O..............................
.O..............................
.O..............................
...O............................
..O.............................
..O.............................
...O............................
....O...........................
.....O..........................
......O.........................
......O.........................
.......O........................
.........O......................
..........O.....................
............O...................
............O...................
.............O..................
...............O................
................O...............
...................O............
....................O...........
.....................O..........
......................O.........
......................O.........
.......................O........
........................O.......
.........................O......
...........................O....
............................O...
.............................O..
.............................O..
............................O...
............................O...
.............................O..
..............................O.
.............................O..
.............................O..
.............................O..
............................O...
...........................O....
...........................O....
..........................O.....
..........................O.....
.......................O........
.......................O........
.....................O..........
....................O...........
...................O............
.................O..............
................O...............
</pre></div></div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[ ]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span>
</pre></div>
</div>
</div>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="The-Experiment-Container.html" class="btn btn-neutral float-right" title="The Experiment Container" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="Paramtypes explained.html" class="btn btn-neutral float-left" title="Paramtypes explained" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>