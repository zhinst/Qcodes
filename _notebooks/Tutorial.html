

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>QCoDeS tutorial &mdash; QCoDeS 0.1.11 documentation</title>
  

  
  
  
  

  

  
  
    

  

  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Dataset Benchmarking" href="DataSet/Benchmarking.html" />
    <link rel="prev" title="The Snapshot" href="The Snapshot.html" /> 

  
  <script src="../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../index.html" class="icon icon-home"> QCoDeS
          

          
          </a>

          
            
            
              <div class="version">
                0.1.11
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../start/index.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../help.html">Get Help</a></li>
<li class="toctree-l1"><a class="reference internal" href="../user/index.html">User Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../community/index.html">Community Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../dataset/index.html">DataSet</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api/index.html">Classes and Functions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api/generated/qcodes.instrument_drivers.html">qcodes.instrument_drivers package</a></li>
<li class="toctree-l1"><a class="reference internal" href="../roadmap.html">Qcodes project plan</a></li>
<li class="toctree-l1"><a class="reference internal" href="../changes/index.html">Changelogs</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../examples/index.html">Examples of using QCoDeS</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="../examples/index.html#basic-examples">Basic examples</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="Combined Parameters.html">Combined Parameters</a></li>
<li class="toctree-l3"><a class="reference internal" href="Comprehensive Plotting How-To.html">Comprehensive Plotting How-To</a></li>
<li class="toctree-l3"><a class="reference internal" href="Configuring_QCoDeS.html">QCoDeS config</a></li>
<li class="toctree-l3"><a class="reference internal" href="Creating Instrument Drivers.html">Creating QCoDeS instrument drivers</a></li>
<li class="toctree-l3"><a class="reference internal" href="Creating Simulated PyVISA Instruments.html">Creating Simulated PyVISA Instruments</a></li>
<li class="toctree-l3"><a class="reference internal" href="Datasaving examples.html">Datasaving Examples</a></li>
<li class="toctree-l3"><a class="reference internal" href="Measure without a Loop.html">Measure without a Loop</a></li>
<li class="toctree-l3"><a class="reference internal" href="Parameters.html">Parameters in QCoDeS</a></li>
<li class="toctree-l3"><a class="reference internal" href="The Location Formatter.html">The Location Formatter</a></li>
<li class="toctree-l3"><a class="reference internal" href="The Snapshot.html">The Snapshot</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">QCoDeS tutorial</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#table-of-contents">Table of Contents</a></li>
<li class="toctree-l4"><a class="reference internal" href="#typical-qcodes-workflow">Typical QCodes workflow</a></li>
<li class="toctree-l4"><a class="reference internal" href="#basic-instrument-interaction">Basic instrument interaction</a></li>
<li class="toctree-l4"><a class="reference internal" href="#measuring">Measuring</a></li>
<li class="toctree-l4"><a class="reference internal" href="#loading-data">Loading data</a></li>
<li class="toctree-l4"><a class="reference internal" href="#example-multiple-2d-measurements-with-live-plotting">Example: multiple 2D measurements with live plotting</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../examples/index.html#dataset">DataSet</a></li>
<li class="toctree-l2"><a class="reference internal" href="../examples/index.html#drivers">Drivers</a></li>
<li class="toctree-l2"><a class="reference internal" href="../examples/index.html#benchmarking">Benchmarking</a></li>
</ul>
</li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">QCoDeS</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
          <li><a href="../examples/index.html">Examples of using QCoDeS</a> &raquo;</li>
        
      <li>QCoDeS tutorial</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/_notebooks/Tutorial.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="qcodes-tutorial">
<h1>QCoDeS tutorial<a class="headerlink" href="#qcodes-tutorial" title="Permalink to this headline">Â¶</a></h1>
<p>Basic overview of QCoDeS</p>
<div class="section" id="table-of-contents">
<h2>Table of Contents<a class="headerlink" href="#table-of-contents" title="Permalink to this headline">Â¶</a></h2>
<ul class="simple">
<li><a class="reference external" href="#workflow">Workflow</a></li>
<li><a class="reference external" href="#inst_io">Basic instrument interaction</a></li>
<li><a class="reference external" href="#measurement">Measuring</a><ul>
<li><a class="reference external" href="#loop_1D">The loop: 1D example</a></li>
<li><a class="reference external" href="#loop_2D">The loop: 2D example</a></li>
</ul>
</li>
</ul>
</div>
<div class="section" id="typical-qcodes-workflow">
<h2>Typical QCodes workflow<a class="headerlink" href="#typical-qcodes-workflow" title="Permalink to this headline">Â¶</a></h2>
<p>(back to <a class="reference external" href="#toc">ToC</a>)</p>
<ol class="arabic simple">
<li>Start up an interactive python session (e.g. using jupyter)</li>
<li>import desired modules</li>
<li>instantiate required instruments</li>
<li>experiment!</li>
</ol>
<div class="section" id="importing">
<h3>Importing<a class="headerlink" href="#importing" title="Permalink to this headline">Â¶</a></h3>
<div class="code ipython3 highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># usually, one imports QCoDeS and some instruments</span>
<span class="kn">import</span> <span class="nn">qcodes</span> <span class="k">as</span> <span class="nn">qc</span>

<span class="c1"># In this tutorial, we import the dummy instrument</span>
<span class="kn">from</span> <span class="nn">qcodes.tests.instrument_mocks</span> <span class="k">import</span> <span class="n">DummyInstrument</span>
<span class="c1"># real instruments are imported in a similar way, e.g.</span>
<span class="c1"># from qcodes.instrument_drivers.Keysight.Keysight_33500B import Keysight_33500B</span>
</pre></div>
</div>
</div>
<div class="section" id="instantiation-of-instruments">
<h3>Instantiation of instruments<a class="headerlink" href="#instantiation-of-instruments" title="Permalink to this headline">Â¶</a></h3>
<div class="code ipython3 highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># It is not enough to import the instruments, they must also be instantiated</span>
<span class="c1"># Note that this can only be done once. If you try to re-instantiate an existing instrument, QCoDeS will</span>
<span class="c1"># complain that &#39;Another instrument has the name&#39;.</span>


<span class="c1"># In this turotial, we consider a simple situation: A single DAC outputting voltages to a Digital Multi Meter</span>

<span class="n">dac</span> <span class="o">=</span> <span class="n">DummyInstrument</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;dac&quot;</span><span class="p">,</span> <span class="n">gates</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;ch1&#39;</span><span class="p">,</span> <span class="s1">&#39;ch2&#39;</span><span class="p">])</span>  <span class="c1"># The DAC voltage source</span>
<span class="n">dmm</span> <span class="o">=</span> <span class="n">DummyInstrument</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;dmm&quot;</span><span class="p">,</span> <span class="n">gates</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;voltage&#39;</span><span class="p">])</span>  <span class="c1"># The DMM voltage reader</span>

<span class="c1"># the default dummy instrument returns always a constant value, in the following line we make it random</span>
<span class="c1"># just for the looks ðŸ’…</span>
<span class="kn">import</span> <span class="nn">random</span>
<span class="n">dmm</span><span class="o">.</span><span class="n">voltage</span><span class="o">.</span><span class="n">get</span> <span class="o">=</span>  <span class="k">lambda</span><span class="p">:</span> <span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">100</span><span class="p">)</span>

<span class="c1"># Finally, the instruments should be bound to a Station. Only instruments bound to the Station get recorded in the</span>
<span class="c1"># measurement metadata, so your metadata is blind to any instrument not in the Station.</span>

<span class="n">station</span> <span class="o">=</span> <span class="n">qc</span><span class="o">.</span><span class="n">Station</span><span class="p">(</span><span class="n">dac</span><span class="p">,</span> <span class="n">dmm</span><span class="p">)</span>
</pre></div>
</div>
<div class="code ipython3 highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># For the tutorial, we add a parameter that loudly prints what it is being set to</span>
<span class="c1"># (It is used below)</span>

<span class="n">chX</span> <span class="o">=</span> <span class="mi">0</span>

<span class="k">def</span> <span class="nf">myget</span><span class="p">():</span>
    <span class="k">return</span> <span class="n">chX</span>

<span class="k">def</span> <span class="nf">myset</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
    <span class="k">global</span> <span class="n">chX</span>
    <span class="n">chX</span> <span class="o">=</span> <span class="n">x</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Setting to </span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">x</span><span class="p">))</span>
    <span class="k">return</span> <span class="kc">None</span>

<span class="n">dac</span><span class="o">.</span><span class="n">add_parameter</span><span class="p">(</span><span class="s1">&#39;verbose_channel&#39;</span><span class="p">,</span>
                  <span class="n">label</span><span class="o">=</span><span class="s1">&#39;Verbose Channel&#39;</span><span class="p">,</span>
                  <span class="n">unit</span><span class="o">=</span><span class="s1">&#39;V&#39;</span><span class="p">,</span>
                  <span class="n">get_cmd</span><span class="o">=</span><span class="n">myget</span><span class="p">,</span>
                  <span class="n">set_cmd</span><span class="o">=</span><span class="n">myset</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="the-location-provider-can-be-set-globally">
<h3>The location provider can be set globally<a class="headerlink" href="#the-location-provider-can-be-set-globally" title="Permalink to this headline">Â¶</a></h3>
<div class="code ipython3 highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">loc_provider</span> <span class="o">=</span> <span class="n">qc</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">location</span><span class="o">.</span><span class="n">FormatLocation</span><span class="p">(</span><span class="n">fmt</span><span class="o">=</span><span class="s1">&#39;data/</span><span class="si">{date}</span><span class="s1">/#</span><span class="si">{counter}</span><span class="s1">_</span><span class="si">{name}</span><span class="s1">_</span><span class="si">{time}</span><span class="s1">&#39;</span><span class="p">)</span>
<span class="n">qc</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">data_set</span><span class="o">.</span><span class="n">DataSet</span><span class="o">.</span><span class="n">location_provider</span><span class="o">=</span><span class="n">loc_provider</span>
</pre></div>
</div>
<p>We are now ready to play with the instruments!</p>
</div>
</div>
<div class="section" id="basic-instrument-interaction">
<h2>Basic instrument interaction<a class="headerlink" href="#basic-instrument-interaction" title="Permalink to this headline">Â¶</a></h2>
<p>(back to <a class="reference external" href="#toc">ToC</a>)</p>
<p>The interaction with instruments mainly consists of <code class="docutils literal notranslate"><span class="pre">setting</span></code> and
<code class="docutils literal notranslate"><span class="pre">getting</span></code> the instrumentsâ€™ <code class="docutils literal notranslate"><span class="pre">parameters</span></code>. A parameter can be anything
from the frequency of a signal generator over the output impedance of an
AWG to the traces from a lock-in amplifier. In this tutorial we â€“for
didactical reasonsâ€“ only consider scalar parameters.</p>
<div class="code ipython3 highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># The voltages output by the dac can be set like so</span>
<span class="n">dac</span><span class="o">.</span><span class="n">ch1</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="mi">8</span><span class="p">)</span>
<span class="c1"># Now the output is 8 V. We can read this value back</span>
<span class="n">dac</span><span class="o">.</span><span class="n">ch1</span><span class="o">.</span><span class="n">get</span><span class="p">()</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="mi">8</span>
</pre></div>
</div>
<p>Setting IMMEDIATELY changes a value. For voltages, that is sometimes
undesired. The value can instead be ramped by stepping and waiting.</p>
<div class="code ipython3 highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">dac</span><span class="o">.</span><span class="n">verbose_channel</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
<span class="n">dac</span><span class="o">.</span><span class="n">verbose_channel</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="mi">9</span><span class="p">)</span>  <span class="c1"># immediate voltage jump of 9 Volts (!)</span>

<span class="c1"># first set a step size</span>
<span class="n">dac</span><span class="o">.</span><span class="n">verbose_channel</span><span class="o">.</span><span class="n">step</span> <span class="o">=</span> <span class="mf">0.1</span>
<span class="c1"># and a wait time</span>
<span class="n">dac</span><span class="o">.</span><span class="n">verbose_channel</span><span class="o">.</span><span class="n">inter_delay</span> <span class="o">=</span> <span class="mf">0.25</span> <span class="c1"># in seconds</span>

<span class="c1"># now a &quot;staircase ramp&quot; is performed by setting</span>
<span class="n">dac</span><span class="o">.</span><span class="n">verbose_channel</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Setting</span> <span class="n">to</span> <span class="mi">0</span>
<span class="n">Setting</span> <span class="n">to</span> <span class="mi">9</span>
<span class="n">Setting</span> <span class="n">to</span> <span class="mf">8.9</span>
<span class="n">Setting</span> <span class="n">to</span> <span class="mf">8.8</span>
<span class="n">Setting</span> <span class="n">to</span> <span class="mf">8.7</span>
<span class="n">Setting</span> <span class="n">to</span> <span class="mf">8.6</span>
<span class="n">Setting</span> <span class="n">to</span> <span class="mf">8.5</span>
<span class="n">Setting</span> <span class="n">to</span> <span class="mf">8.4</span>
<span class="n">Setting</span> <span class="n">to</span> <span class="mf">8.3</span>
<span class="n">Setting</span> <span class="n">to</span> <span class="mf">8.2</span>
<span class="n">Setting</span> <span class="n">to</span> <span class="mf">8.1</span>
<span class="n">Setting</span> <span class="n">to</span> <span class="mf">8.0</span>
<span class="n">Setting</span> <span class="n">to</span> <span class="mf">7.9</span>
<span class="n">Setting</span> <span class="n">to</span> <span class="mf">7.8</span>
<span class="n">Setting</span> <span class="n">to</span> <span class="mf">7.7</span>
<span class="n">Setting</span> <span class="n">to</span> <span class="mf">7.6</span>
<span class="n">Setting</span> <span class="n">to</span> <span class="mf">7.5</span>
<span class="n">Setting</span> <span class="n">to</span> <span class="mf">7.4</span>
<span class="n">Setting</span> <span class="n">to</span> <span class="mf">7.3</span>
<span class="n">Setting</span> <span class="n">to</span> <span class="mf">7.2</span>
<span class="n">Setting</span> <span class="n">to</span> <span class="mf">7.1</span>
<span class="n">Setting</span> <span class="n">to</span> <span class="mf">7.0</span>
<span class="n">Setting</span> <span class="n">to</span> <span class="mf">6.9</span>
<span class="n">Setting</span> <span class="n">to</span> <span class="mf">6.8</span>
<span class="n">Setting</span> <span class="n">to</span> <span class="mf">6.699999999999999</span>
<span class="n">Setting</span> <span class="n">to</span> <span class="mf">6.6</span>
<span class="n">Setting</span> <span class="n">to</span> <span class="mf">6.5</span>
<span class="n">Setting</span> <span class="n">to</span> <span class="mf">6.4</span>
<span class="n">Setting</span> <span class="n">to</span> <span class="mf">6.3</span>
<span class="n">Setting</span> <span class="n">to</span> <span class="mf">6.199999999999999</span>
<span class="n">Setting</span> <span class="n">to</span> <span class="mf">6.1</span>
<span class="n">Setting</span> <span class="n">to</span> <span class="mf">6.0</span>
<span class="n">Setting</span> <span class="n">to</span> <span class="mf">5.9</span>
<span class="n">Setting</span> <span class="n">to</span> <span class="mf">5.8</span>
<span class="n">Setting</span> <span class="n">to</span> <span class="mf">5.699999999999999</span>
<span class="n">Setting</span> <span class="n">to</span> <span class="mf">5.6</span>
<span class="n">Setting</span> <span class="n">to</span> <span class="mf">5.5</span>
<span class="n">Setting</span> <span class="n">to</span> <span class="mf">5.4</span>
<span class="n">Setting</span> <span class="n">to</span> <span class="mf">5.3</span>
<span class="n">Setting</span> <span class="n">to</span> <span class="mf">5.199999999999999</span>
<span class="n">Setting</span> <span class="n">to</span> <span class="mf">5.1</span>
<span class="n">Setting</span> <span class="n">to</span> <span class="mi">5</span>
</pre></div>
</div>
<p><strong>NOTE</strong>: that is ramp is blocking and has a low resolution since each
<code class="docutils literal notranslate"><span class="pre">set</span></code> on a real instrument has a latency on the order of ms. Some
instrument drivers support native-resolution asynchronous ramping.
Always refer to your instrument driver if you need high performance of
an instrument.</p>
<div class="code ipython3 highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># after such a ramp, it is a good idea to reset the step and delay</span>
<span class="n">dac</span><span class="o">.</span><span class="n">verbose_channel</span><span class="o">.</span><span class="n">step</span> <span class="o">=</span> <span class="mi">0</span>
<span class="c1"># and a wait time</span>
<span class="n">dac</span><span class="o">.</span><span class="n">verbose_channel</span><span class="o">.</span><span class="n">inter_delay</span> <span class="o">=</span> <span class="mi">0</span>
</pre></div>
</div>
</div>
<div class="section" id="measuring">
<h2>Measuring<a class="headerlink" href="#measuring" title="Permalink to this headline">Â¶</a></h2>
<p>(back to <a class="reference external" href="#toc">ToC</a>)</p>
<div class="section" id="d-loop-example">
<h3>1D Loop example<a class="headerlink" href="#d-loop-example" title="Permalink to this headline">Â¶</a></h3>
<div class="section" id="defining-the-loop-and-actions">
<h4>Defining the <code class="docutils literal notranslate"><span class="pre">Loop</span></code> and actions<a class="headerlink" href="#defining-the-loop-and-actions" title="Permalink to this headline">Â¶</a></h4>
<p>Before you run a measurement loop you do two things: 1. You describe
what parameter(s) to vary and how. This is the creation of a <code class="docutils literal notranslate"><span class="pre">Loop</span></code>
object: <code class="docutils literal notranslate"><span class="pre">loop</span> <span class="pre">=</span> <span class="pre">Loop(sweep_values,</span> <span class="pre">...)</span></code> 2. You describe what to do at
each step in the loop. This is <code class="docutils literal notranslate"><span class="pre">loop.each(*actions)</span></code> - measurements
(any object with a <code class="docutils literal notranslate"><span class="pre">.get</span></code> method will be interpreted as a measurement)
- <code class="docutils literal notranslate"><span class="pre">Task</span></code>: some callable (which can have arguments with it) to be
executed each time through the loop. Does not generate data. - <code class="docutils literal notranslate"><span class="pre">Wait</span></code>:
a specialized <code class="docutils literal notranslate"><span class="pre">Task</span></code> just to wait a certain time. - <code class="docutils literal notranslate"><span class="pre">BreakIf</span></code>: some
condition that, if it returns truthy, breaks (this level of) the loop</p>
<div class="code ipython3 highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># For instance, sweep a dac voltage and record with the dmm</span>

<span class="n">loop</span> <span class="o">=</span> <span class="n">qc</span><span class="o">.</span><span class="n">Loop</span><span class="p">(</span><span class="n">dac</span><span class="o">.</span><span class="n">ch1</span><span class="o">.</span><span class="n">sweep</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">20</span><span class="p">,</span> <span class="mf">0.1</span><span class="p">),</span> <span class="n">delay</span><span class="o">=</span><span class="mf">0.001</span><span class="p">)</span><span class="o">.</span><span class="n">each</span><span class="p">(</span><span class="n">dmm</span><span class="o">.</span><span class="n">voltage</span><span class="p">)</span>
<span class="n">data</span> <span class="o">=</span> <span class="n">loop</span><span class="o">.</span><span class="n">get_data_set</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;testsweep&#39;</span><span class="p">)</span>
</pre></div>
</div>
<div class="code ipython3 highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">plot_1d</span> <span class="o">=</span> <span class="n">qc</span><span class="o">.</span><span class="n">QtPlot</span><span class="p">()</span>  <span class="c1"># create a plot</span>
<span class="n">plot_1d</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">data</span><span class="o">.</span><span class="n">dmm_voltage</span><span class="p">)</span>  <span class="c1"># add a graph to the plot</span>
<span class="n">_</span> <span class="o">=</span> <span class="n">loop</span><span class="o">.</span><span class="n">with_bg_task</span><span class="p">(</span><span class="n">plot_1d</span><span class="o">.</span><span class="n">update</span><span class="p">,</span> <span class="n">plot_1d</span><span class="o">.</span><span class="n">save</span><span class="p">)</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>  <span class="c1"># run the loop</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Started</span> <span class="n">at</span> <span class="mi">2017</span><span class="o">-</span><span class="mi">10</span><span class="o">-</span><span class="mi">12</span> <span class="mi">11</span><span class="p">:</span><span class="mi">10</span><span class="p">:</span><span class="mi">21</span>
<span class="n">DataSet</span><span class="p">:</span>
   <span class="n">location</span> <span class="o">=</span> <span class="s1">&#39;data/2017-10-12/#001_testsweep_11-10-17&#39;</span>
   <span class="o">&lt;</span><span class="n">Type</span><span class="o">&gt;</span>   <span class="o">|</span> <span class="o">&lt;</span><span class="n">array_id</span><span class="o">&gt;</span>  <span class="o">|</span> <span class="o">&lt;</span><span class="n">array</span><span class="o">.</span><span class="n">name</span><span class="o">&gt;</span> <span class="o">|</span> <span class="o">&lt;</span><span class="n">array</span><span class="o">.</span><span class="n">shape</span><span class="o">&gt;</span>
   <span class="n">Setpoint</span> <span class="o">|</span> <span class="n">dac_ch1_set</span> <span class="o">|</span> <span class="n">ch1</span>          <span class="o">|</span> <span class="p">(</span><span class="mi">201</span><span class="p">,)</span>
   <span class="n">Measured</span> <span class="o">|</span> <span class="n">dmm_voltage</span> <span class="o">|</span> <span class="n">voltage</span>      <span class="o">|</span> <span class="p">(</span><span class="mi">201</span><span class="p">,)</span>
<span class="n">Finished</span> <span class="n">at</span> <span class="mi">2017</span><span class="o">-</span><span class="mi">10</span><span class="o">-</span><span class="mi">12</span> <span class="mi">11</span><span class="p">:</span><span class="mi">10</span><span class="p">:</span><span class="mi">26</span>
</pre></div>
</div>
<div class="code ipython3 highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># The plot may be recalled easily</span>
<span class="n">plot_1d</span>
</pre></div>
</div>
<img alt="../_images/Tutorial_19_0.png" src="../_images/Tutorial_19_0.png" />
</div>
<div class="section" id="output-of-the-loop">
<h4>Output of the loop<a class="headerlink" href="#output-of-the-loop" title="Permalink to this headline">Â¶</a></h4>
<ul class="simple">
<li>A loop returns a dataset.</li>
<li>The representation of the dataset shows what arrays it contains and
where it is saved.</li>
<li>The dataset initially starts out empty (filled with NANâ€™s) and getâ€™s
filled while the Loop getâ€™s executed.</li>
</ul>
<p>Once the measurement is done, take a look at the file in finder/explorer
(the dataset.location should give you the relative path). Note also the
snapshot that captures the settings of all instruments at the start of
the Loop. This metadata is also accesible from the dataset and captures
a snapshot of each instrument listed in the station.</p>
<div class="code ipython3 highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">dac</span><span class="o">.</span><span class="n">snapshot</span><span class="p">()</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span><span class="s1">&#39;__class__&#39;</span><span class="p">:</span> <span class="s1">&#39;qcodes.tests.instrument_mocks.DummyInstrument&#39;</span><span class="p">,</span>
 <span class="s1">&#39;functions&#39;</span><span class="p">:</span> <span class="p">{},</span>
 <span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="s1">&#39;dac&#39;</span><span class="p">,</span>
 <span class="s1">&#39;parameters&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;IDN&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;__class__&#39;</span><span class="p">:</span> <span class="s1">&#39;qcodes.instrument.parameter.Parameter&#39;</span><span class="p">,</span>
   <span class="s1">&#39;full_name&#39;</span><span class="p">:</span> <span class="s1">&#39;dac_IDN&#39;</span><span class="p">,</span>
   <span class="s1">&#39;instrument&#39;</span><span class="p">:</span> <span class="s1">&#39;qcodes.tests.instrument_mocks.DummyInstrument&#39;</span><span class="p">,</span>
   <span class="s1">&#39;instrument_name&#39;</span><span class="p">:</span> <span class="s1">&#39;dac&#39;</span><span class="p">,</span>
   <span class="s1">&#39;inter_delay&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
   <span class="s1">&#39;label&#39;</span><span class="p">:</span> <span class="s1">&#39;IDN&#39;</span><span class="p">,</span>
   <span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="s1">&#39;IDN&#39;</span><span class="p">,</span>
   <span class="s1">&#39;post_delay&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
   <span class="s1">&#39;raw_value&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;firmware&#39;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
    <span class="s1">&#39;model&#39;</span><span class="p">:</span> <span class="s1">&#39;dac&#39;</span><span class="p">,</span>
    <span class="s1">&#39;serial&#39;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
    <span class="s1">&#39;vendor&#39;</span><span class="p">:</span> <span class="kc">None</span><span class="p">},</span>
   <span class="s1">&#39;ts&#39;</span><span class="p">:</span> <span class="s1">&#39;2017-10-12 11:09:32&#39;</span><span class="p">,</span>
   <span class="s1">&#39;unit&#39;</span><span class="p">:</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>
   <span class="s1">&#39;vals&#39;</span><span class="p">:</span> <span class="s1">&#39;&lt;Anything&gt;&#39;</span><span class="p">,</span>
   <span class="s1">&#39;value&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;firmware&#39;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
    <span class="s1">&#39;model&#39;</span><span class="p">:</span> <span class="s1">&#39;dac&#39;</span><span class="p">,</span>
    <span class="s1">&#39;serial&#39;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
    <span class="s1">&#39;vendor&#39;</span><span class="p">:</span> <span class="kc">None</span><span class="p">}},</span>
  <span class="s1">&#39;ch1&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;__class__&#39;</span><span class="p">:</span> <span class="s1">&#39;qcodes.instrument.parameter.Parameter&#39;</span><span class="p">,</span>
   <span class="s1">&#39;full_name&#39;</span><span class="p">:</span> <span class="s1">&#39;dac_ch1&#39;</span><span class="p">,</span>
   <span class="s1">&#39;instrument&#39;</span><span class="p">:</span> <span class="s1">&#39;qcodes.tests.instrument_mocks.DummyInstrument&#39;</span><span class="p">,</span>
   <span class="s1">&#39;instrument_name&#39;</span><span class="p">:</span> <span class="s1">&#39;dac&#39;</span><span class="p">,</span>
   <span class="s1">&#39;inter_delay&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
   <span class="s1">&#39;label&#39;</span><span class="p">:</span> <span class="s1">&#39;Gate ch1&#39;</span><span class="p">,</span>
   <span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="s1">&#39;ch1&#39;</span><span class="p">,</span>
   <span class="s1">&#39;post_delay&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
   <span class="s1">&#39;raw_value&#39;</span><span class="p">:</span> <span class="mf">20.0</span><span class="p">,</span>
   <span class="s1">&#39;ts&#39;</span><span class="p">:</span> <span class="s1">&#39;2017-10-12 11:10:26&#39;</span><span class="p">,</span>
   <span class="s1">&#39;unit&#39;</span><span class="p">:</span> <span class="s1">&#39;V&#39;</span><span class="p">,</span>
   <span class="s1">&#39;vals&#39;</span><span class="p">:</span> <span class="s1">&#39;&lt;Numbers -800&lt;=v&lt;=400&gt;&#39;</span><span class="p">,</span>
   <span class="s1">&#39;value&#39;</span><span class="p">:</span> <span class="mf">20.0</span><span class="p">},</span>
  <span class="s1">&#39;ch2&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;__class__&#39;</span><span class="p">:</span> <span class="s1">&#39;qcodes.instrument.parameter.Parameter&#39;</span><span class="p">,</span>
   <span class="s1">&#39;full_name&#39;</span><span class="p">:</span> <span class="s1">&#39;dac_ch2&#39;</span><span class="p">,</span>
   <span class="s1">&#39;instrument&#39;</span><span class="p">:</span> <span class="s1">&#39;qcodes.tests.instrument_mocks.DummyInstrument&#39;</span><span class="p">,</span>
   <span class="s1">&#39;instrument_name&#39;</span><span class="p">:</span> <span class="s1">&#39;dac&#39;</span><span class="p">,</span>
   <span class="s1">&#39;inter_delay&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
   <span class="s1">&#39;label&#39;</span><span class="p">:</span> <span class="s1">&#39;Gate ch2&#39;</span><span class="p">,</span>
   <span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="s1">&#39;ch2&#39;</span><span class="p">,</span>
   <span class="s1">&#39;post_delay&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
   <span class="s1">&#39;raw_value&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
   <span class="s1">&#39;ts&#39;</span><span class="p">:</span> <span class="s1">&#39;2017-10-12 11:09:32&#39;</span><span class="p">,</span>
   <span class="s1">&#39;unit&#39;</span><span class="p">:</span> <span class="s1">&#39;V&#39;</span><span class="p">,</span>
   <span class="s1">&#39;vals&#39;</span><span class="p">:</span> <span class="s1">&#39;&lt;Numbers -800&lt;=v&lt;=400&gt;&#39;</span><span class="p">,</span>
   <span class="s1">&#39;value&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">},</span>
  <span class="s1">&#39;verbose_channel&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;__class__&#39;</span><span class="p">:</span> <span class="s1">&#39;qcodes.instrument.parameter.Parameter&#39;</span><span class="p">,</span>
   <span class="s1">&#39;full_name&#39;</span><span class="p">:</span> <span class="s1">&#39;dac_verbose_channel&#39;</span><span class="p">,</span>
   <span class="s1">&#39;instrument&#39;</span><span class="p">:</span> <span class="s1">&#39;qcodes.tests.instrument_mocks.DummyInstrument&#39;</span><span class="p">,</span>
   <span class="s1">&#39;instrument_name&#39;</span><span class="p">:</span> <span class="s1">&#39;dac&#39;</span><span class="p">,</span>
   <span class="s1">&#39;inter_delay&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
   <span class="s1">&#39;label&#39;</span><span class="p">:</span> <span class="s1">&#39;Verbose Channel&#39;</span><span class="p">,</span>
   <span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="s1">&#39;verbose_channel&#39;</span><span class="p">,</span>
   <span class="s1">&#39;post_delay&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
   <span class="s1">&#39;raw_value&#39;</span><span class="p">:</span> <span class="mi">5</span><span class="p">,</span>
   <span class="s1">&#39;ts&#39;</span><span class="p">:</span> <span class="s1">&#39;2017-10-12 11:09:46&#39;</span><span class="p">,</span>
   <span class="s1">&#39;unit&#39;</span><span class="p">:</span> <span class="s1">&#39;V&#39;</span><span class="p">,</span>
   <span class="s1">&#39;value&#39;</span><span class="p">:</span> <span class="mi">5</span><span class="p">}},</span>
 <span class="s1">&#39;submodules&#39;</span><span class="p">:</span> <span class="p">{}}</span>
</pre></div>
</div>
<p>There is also a more human-readable version of the essential
information.</p>
<div class="code ipython3 highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">dac</span><span class="o">.</span><span class="n">print_readable_snapshot</span><span class="p">()</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">dac</span><span class="p">:</span>
    <span class="n">parameter</span>      <span class="n">value</span>
<span class="o">--------------------------------------------------------------------------------</span>
<span class="n">IDN</span>             <span class="p">:</span>   <span class="p">{</span><span class="s1">&#39;vendor&#39;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span> <span class="s1">&#39;model&#39;</span><span class="p">:</span> <span class="s1">&#39;dac&#39;</span><span class="p">,</span> <span class="s1">&#39;serial&#39;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span> <span class="s1">&#39;firmware&#39;</span><span class="o">...</span>
<span class="n">ch1</span>             <span class="p">:</span>   <span class="mi">20</span> <span class="p">(</span><span class="n">V</span><span class="p">)</span>
<span class="n">ch2</span>             <span class="p">:</span>   <span class="mi">0</span> <span class="p">(</span><span class="n">V</span><span class="p">)</span>
<span class="n">verbose_channel</span> <span class="p">:</span>   <span class="mi">5</span> <span class="p">(</span><span class="n">V</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="loading-data">
<h2>Loading data<a class="headerlink" href="#loading-data" title="Permalink to this headline">Â¶</a></h2>
<p>The dataset knows its own location, which we may use to load data.</p>
<div class="code ipython3 highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">location</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">location</span>
<span class="n">loaded_data</span> <span class="o">=</span> <span class="n">qc</span><span class="o">.</span><span class="n">load_data</span><span class="p">(</span><span class="n">location</span><span class="p">)</span>
<span class="n">plot</span> <span class="o">=</span> <span class="n">qc</span><span class="o">.</span><span class="n">MatPlot</span><span class="p">(</span><span class="n">loaded_data</span><span class="o">.</span><span class="n">dmm_voltage</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="example-multiple-2d-measurements-with-live-plotting">
<h2>Example: multiple 2D measurements with live plotting<a class="headerlink" href="#example-multiple-2d-measurements-with-live-plotting" title="Permalink to this headline">Â¶</a></h2>
<div class="code ipython3 highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># Loops can be nested, so that a new sweep runs for each point in the outer loop</span>

<span class="n">loop</span> <span class="o">=</span> <span class="n">qc</span><span class="o">.</span><span class="n">Loop</span><span class="p">(</span><span class="n">dac</span><span class="o">.</span><span class="n">ch1</span><span class="o">.</span><span class="n">sweep</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="mf">0.1</span><span class="p">)</span><span class="o">.</span><span class="n">loop</span><span class="p">(</span><span class="n">dac</span><span class="o">.</span><span class="n">ch2</span><span class="o">.</span><span class="n">sweep</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="mf">0.1</span><span class="p">)</span><span class="o">.</span><span class="n">each</span><span class="p">(</span>
    <span class="n">dmm</span><span class="o">.</span><span class="n">voltage</span>
    <span class="p">)</span>
<span class="n">data</span> <span class="o">=</span> <span class="n">loop</span><span class="o">.</span><span class="n">get_data_set</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;2D_test&#39;</span><span class="p">)</span>
</pre></div>
</div>
<div class="code ipython3 highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">plot</span> <span class="o">=</span> <span class="n">qc</span><span class="o">.</span><span class="n">QtPlot</span><span class="p">()</span>
<span class="n">plot</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">data</span><span class="o">.</span><span class="n">dmm_voltage</span><span class="p">,</span> <span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">1200</span><span class="p">,</span> <span class="mi">500</span><span class="p">))</span>
<span class="n">_</span> <span class="o">=</span> <span class="n">loop</span><span class="o">.</span><span class="n">with_bg_task</span><span class="p">(</span><span class="n">plot</span><span class="o">.</span><span class="n">update</span><span class="p">,</span> <span class="n">plot</span><span class="o">.</span><span class="n">save</span><span class="p">)</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Started</span> <span class="n">at</span> <span class="mi">2017</span><span class="o">-</span><span class="mi">10</span><span class="o">-</span><span class="mi">12</span> <span class="mi">11</span><span class="p">:</span><span class="mi">10</span><span class="p">:</span><span class="mi">41</span>
</pre></div>
</div>
<div class="code ipython3 highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">plot</span>
</pre></div>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="DataSet/Benchmarking.html" class="btn btn-neutral float-right" title="Dataset Benchmarking" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="The Snapshot.html" class="btn btn-neutral" title="The Snapshot" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'0.1.11',
            LANGUAGE:'None',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>
      <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  

  <script type="text/javascript" src="../_static/js/theme.js"></script>

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>